!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).RangeBar=t()}}(function(){var t;return(function t(e,i,n){function s(r,o){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var h=Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[r]={exports:{}};e[r][0].call(p.exports,function(t){var i;return s(e[r][1][t]||t)},p,p.exports,t,e,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s})({1:[function(t,e,i){var n=t("estira"),s=window.$,a=t("./raf");Object.prototype.hasOwnProperty;var r=n.extend({initialize:function(t){this.$el=s(t),this.$data={},this.$el.data("element",this)},draw:function(t){var e=this;return this.drawing||(a(function(){e.drawing=!1,e.$el.css(t)}),this.drawing=!0),this.$el},on:function(){return this.$el.on.apply(this.$el,arguments),this},one:function(){return this.$el.one.apply(this.$el,arguments),this},off:function(){return this.$el.off.apply(this.$el,arguments),this},trigger:function(){return this.$el.trigger.apply(this.$el,arguments),this},remove:function(){this.$el.remove()},detach:function(){this.$el.detach()},data:function(t,e){var i=t;if("string"==typeof t){if(void 0===e)return this.$data[t];(i={})[t]=e}return s.extend(this.$data,i),this}});e.exports=r},{"./raf":6,estira:10}],2:[function(t,e,i){var n=Object.prototype.hasOwnProperty;e.exports=function t(e,i){return n.call(i,e)?i[e]:i.originalEvent&&i.originalEvent.touches?i.originalEvent.touches[0][e]:void 0}},{}],3:[function(t,e,i){var n=t("./element"),s=t("./vertical"),a=n.extend(s).extend({initialize:function t(e){t.super$.call(this,'<div class="elessar-indicator">'),e.indicatorClass&&this.$el.addClass(e.indicatorClass),e.value&&this.val(e.value),this.options=e},val:function(t){return t&&(this.isVertical()?this.draw({top:100*t+"%"}):this.draw({left:100*t+"%"}),this.value=t),this.value}});e.exports=a},{"./element":1,"./vertical":9}],4:[function(t,e,i){var n=t("./element.js").extend({initialize:function t(e){t.super$.call(this,'<div class="elessar-label">'),this.$el.css(e.perant.edge("start"),100*e.value+"%"),"function"==typeof e.label?this.$el.text(e.label.call(this,e.perant.normalise(e.value))):"string"==typeof e.label?this.$el.text(e.label):this.$el.text(e.perant.normalise(e.value))}});e.exports=n},{"./element.js":1}],5:[function(t,e,i){var n=window.$,s=t("./range"),a=t("./raf"),r=s.extend({initialize:function t(e){t.super$.call(this,n.extend({readonly:!0,label:"+"},e)),this.$el.addClass("elessar-phantom"),this.on("mousedown.elessar touchstart.elessar",n.proxy(this.mousedown,this))},mousedown:function(t){if(1===t.which){t.pageX;var e=this.options.perant.addRange(this.val());this.remove(),this.options.perant.trigger("addrange",[e.val(),e]),a(function(){e.$el.find(".elessar-handle:first-child").trigger(t.type)})}},removePhantom:function(){}});e.exports=r},{"./raf":6,"./range":7}],6:[function(t,e,i){for(var n=0,s=["webkit","moz"],a=window.requestAnimationFrame,r=0;r<s.length&&!window.requestAnimationFrame;++r)a=window[s[r]+"RequestAnimationFrame"];a||(a=function(t,e){var i=new Date().getTime(),s=Math.max(0,16-(i-n)),a=window.setTimeout(function(){t(i+s)},s);return n=i+s,a}),e.exports=a},{}],7:[function(t,e,i){var n=window.$,s=t("./element"),a=t("./eventprop"),r=t("./vertical"),o=s.extend(r).extend({initialize:function t(e){var i=this;t.super$.call(this,'<div class="elessar-range"><span class="elessar-barlabel">'),this.options=e,this.perant=e.perant,this.options.rangeClass&&this.$el.addClass(this.options.rangeClass),this.readonly()?this.$el.addClass("elessar-readonly"):(this.$el.prepend('<div class="elessar-handle">').append('<div class="elessar-handle">'),this.on("mouseenter.elessar touchstart.elessar",n.proxy(this.removePhantom,this)),this.on("mousedown.elessar touchstart.elessar",n.proxy(this.mousedown,this)),this.on("click",n.proxy(this.click,this)),this.on("dblclick",n.proxy(this.dblclick,this))),"function"==typeof this.options.label?this.on("changing",function(t,e){i.writeLabel(i.options.label.call(i,e.map(n.proxy(i.perant.normalise,i.perant))))}):this.writeLabel(this.options.label),this.range=[],this.hasChanged=!1,this.clickTimeout=null,this.options.value&&this.val(this.options.value)},writeLabel:function(t){this.$el.find(".elessar-barlabel")[this.options.htmlLabel?"html":"text"](t)},isVertical:function(){return this.perant.options.vertical},removePhantom:function(){this.perant.removePhantom()},readonly:function(){return"function"==typeof this.options.readonly?this.options.readonly.call(this.perant,this):this.options.readonly},val:function(t,e){if(void 0===t)return this.range;e=n.extend({},{dontApplyDelta:!1,trigger:!0},e||{});var i=this.perant.nextRange(this.$el),s=this.perant.prevRange(this.$el),a=t[1]-t[0],r=this;if(this.options.snap&&(t=t.map(p),a=p(a)),i&&i.val()[0]<=t[1]&&s&&s.val()[1]>=t[0]&&(t[1]=i.val()[0],t[0]=s.val()[1]),i&&i.val()[0]<t[1]&&(!this.perant.options.allowSwap||i.val()[1]>=t[0]?(t[1]=i.val()[0],e.dontApplyDelta||(t[0]=t[1]-a)):this.perant.repositionRange(this,t)),s&&s.val()[1]>t[0]&&(!this.perant.options.allowSwap||s.val()[0]<=t[1]?(t[0]=s.val()[1],e.dontApplyDelta||(t[1]=t[0]+a)):this.perant.repositionRange(this,t)),t[1]>=1&&(t[1]=1,e.dontApplyDelta||(t[0]=1-a)),t[0]<=0&&(t[0]=0,e.dontApplyDelta||(t[1]=a)),this.perant.options.bound){var o=this.perant.options.bound(this);o&&(o.upper&&t[1]>this.perant.abnormalise(o.upper)&&(t[1]=this.perant.abnormalise(o.upper),e.dontApplyDelta||(t[0]=t[1]-a)),o.lower&&t[0]<this.perant.abnormalise(o.lower)&&(t[0]=this.perant.abnormalise(o.lower),e.dontApplyDelta||(t[1]=t[0]+a)))}if(this.range[0]===t[0]&&this.range[1]===t[1])return this.$el;this.range=t,e.trigger&&(this.$el.triggerHandler("changing",[t,this.$el]),this.hasChanged=!0);var l=100*t[0]+"%",h=100*(t[1]-t[0])+"%";return this.draw(this.perant.options.vertical?{top:l,minHeight:h}:{left:l,minWidth:h}),this;function p(t){return Math.round(t/r.options.snap)*r.options.snap}function u(t){return t?t<0?-1:1:0}},click:function(t){if(t.stopPropagation(),t.preventDefault(),"elessar-handle"!=t.target.className&&!(t.which>1)){var e=this;if(this.$el.hasClass("elessar-selected")||(null!=this.clickTimeout&&clearTimeout(this.clickTimeout),n(".elessar-range").removeClass("elessar-selected"),this.$el.addClass("elessar-selected")),this.deleteConfirm){this.perant.removeRange(this),clearTimeout(this.deleteTimeout),this.deleteConfirm=!1;return}"true"==e.$el.attr("data-dblclick")?(null!=this.clickTimeout&&clearTimeout(this.clickTimeout),this.perant.options.allowDelete&&(this.$el.addClass("elessar-delete-confirm"),this.deleteConfirm=!0,this.deleteTimeout=setTimeout(function(){e.$el.attr("data-dblclick",!1),e.$el.removeClass("elessar-delete-confirm"),e.deleteConfirm=!1},this.perant.options.deleteTimeout))):(e.$el.attr("data-dblclick",!0),this.clickTimeout=setTimeout(function(){e.$el.attr("data-dblclick",!1),e.hasOwnProperty("perant")&&e.perant.hasOwnProperty("options")&&"function"==typeof e.perant.options.onClick&&e.perant.options.onClick(t)},500))}},dblclick:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(t){if(t.stopPropagation(),t.preventDefault(),this.hasChanged=!1,!(t.which>1)){n(t.target).is(".elessar-handle:first-child")?(n("body").addClass("elessar-resizing").toggleClass("elessar-resizing-vertical",this.isVertical()),n(document).on("mousemove.elessar touchmove.elessar",this.resizeStart(t))):n(t.target).is(".elessar-handle:last-child")?(n("body").addClass("elessar-resizing").toggleClass("elessar-resizing-vertical",this.isVertical()),n(document).on("mousemove.elessar touchmove.elessar",this.resizeEnd(t))):(n("body").addClass("elessar-dragging").toggleClass("elessar-dragging-vertical",this.isVertical()),n(document).on("mousemove.elessar touchmove.elessar",this.drag(t)));var e=this;n(document).one("mouseup.elessar touchend.elessar",function(t){t.stopPropagation(),t.preventDefault(),e.hasChanged&&!e.swapping&&e.trigger("change",[e.range,e.$el]),e.swapping=!1,n(document).off("mouseup.elessar mousemove.elessar touchend.elessar touchmove.elessar"),n("body").removeClass("elessar-resizing elessar-dragging elessar-resizing-vertical elessar-dragging-vertical")})}},drag:function(t){var e=this,i=this.startProp("offset"),n=(this.startProp("position"),a(this.ifVertical("clientY","clientX"),t)),s=n?n-i:0,r=this.totalSize(),o=this.options.perant,l=o.startProp("offset"),h=o.totalSize();return function(t){t.stopPropagation(),t.preventDefault();var i=a(e.ifVertical("clientY","clientX"),t);if(void 0!==i){var n=i-l-s;if(n>=0&&n<=h-r){var o=n/h-e.range[0];e.val([n/h,e.range[1]+o])}else s=i-e.startProp("offset")}}},resizeEnd:function(t){var e=this,i=this.startProp("offset"),s=this.startProp("position"),r=(a(this.ifVertical("clientY","clientX"),t),this.totalSize(),this.options.perant),o=(r.startProp("offset"),r.totalSize()),l=this.options.minSize*o;return function(t){var r="touchmove"===t.type?"touchend":"mouseup",h="touchmove"===t.type?"touchstart":"mousedown";t.stopPropagation(),t.preventDefault();var p=a(e.ifVertical("clientY","clientX"),t),u=p-i;void 0!==p&&(u>o-s&&(u=o-s),u>=l?e.val([e.range[0],e.range[0]+u/o],{dontApplyDelta:!0}):u<=10&&(e.swapping=!0,n(document).trigger(r+".elessar"),e.$el.find(".elessar-handle:first-child").trigger(h+".elessar")))}},resizeStart:function(t){var e=this,i=this.startProp("offset"),s=this.startProp("position"),r=a(this.ifVertical("clientY","clientX"),t),o=r?r-i:0,l=this.totalSize(),h=this.options.perant,p=h.startProp("offset"),u=h.totalSize(),c=this.options.minSize*u;return function(t){var i="touchmove"===t.type?"touchend":"mouseup",r="touchmove"===t.type?"touchstart":"mousedown";t.stopPropagation(),t.preventDefault();var h=a(e.ifVertical("clientY","clientX"),t),f=h-p-o,d=s+l-f;void 0!==h&&(f<0&&(f=0,d=s+l),d>=c?e.val([f/u,e.range[1]],{dontApplyDelta:!0}):d<=10&&(e.swapping=!0,n(document).trigger(i+".elessar"),e.$el.find(".elessar-handle:last-child").trigger(r+".elessar")))}}});e.exports=o},{"./element":1,"./eventprop":2,"./vertical":9}],8:[function(t,e,i){var n=t("./element"),s=t("./range"),a=t("./phantom"),r=t("./indicator"),o=t("./eventprop"),l=t("./vertical"),h=window.$,p=t("./mark.js"),u=n.extend(l).extend({initialize:function t(e){if(e=e||{},t.super$.call(this,'<div class="elessar-rangebar">'),this.options=h.extend({},u.defaults,e),this.options.min=this.options.valueParse(this.options.min),this.options.max=this.options.valueParse(this.options.max),this.options.barClass&&this.$el.addClass(this.options.barClass),this.options.vertical&&this.$el.addClass("elessar-vertical"),this.ranges=[],this.on("mousemove.elessar touchmove.elessar",h.proxy(this.mousemove,this)),this.on("mouseleave.elessar touchleave.elessar",h.proxy(this.removePhantom,this)),e.values&&this.setVal(e.values),e.bgLabels&&(e.bgMark={count:e.bgLabels}),e.bgMark){if(this.$markContainer=h('<div class="elessar-labels">').appendTo(this.$el),e.bgMark.count)for(var i=0;i<e.bgMark.count;++i)this.$markContainer.append(new p({label:e.bgMark.label,value:i/e.bgMark.count,perant:this}).$el);else if(e.bgMark.interval)for(var i=this.abnormalise(this.options.min);i<this.abnormalise(this.options.max);i+=this.abnormalise(e.bgMark.interval))this.$markContainer.append(new p({label:e.bgMark.label,value:i,perant:this}).$el)}var n=this;if(e.indicator){var s=this.indicator=new r({perant:this,vertical:this.options.vertical,indicatorClass:e.indicatorClass});s.val(this.abnormalise(e.indicator(this,s,function(){s.val(n.abnormalise(e.indicator(n,s)))}))),this.$el.append(s.$el)}},normaliseRaw:function(t){return this.options.min+t*(this.options.max-this.options.min)},normalise:function(t){return this.options.valueFormat(this.normaliseRaw(t))},abnormaliseRaw:function(t){return(t-this.options.min)/(this.options.max-this.options.min)},abnormalise:function(t){return this.abnormaliseRaw(this.options.valueParse(t))},findGap:function(t){var e=0;return this.ranges.forEach(function(i,n){i.val()[0]<t[0]&&i.val()[1]<t[1]&&(e=n+1)}),e},insertRangeIndex:function(t,e,i){i||this.ranges.splice(e,0,t),this.ranges[e-1]?this.ranges[e-1].$el.after(t.$el):this.$el.prepend(t.$el)},addRange:function(t,e){var i=s({perant:this,snap:this.options.snap?this.abnormaliseRaw(this.options.snap+this.options.min):null,label:this.options.label,rangeClass:this.options.rangeClass,minSize:this.options.minSize?this.abnormaliseRaw(this.options.minSize+this.options.min):null,readonly:this.options.readonly,htmlLabel:this.options.htmlLabel});this.options.data&&i.data(this.options.data.call(i,this)),e&&i.data(e),this.insertRangeIndex(i,this.findGap(t)),i.val(t);var n=this;return i.on("changing",function(t,e,i){t.stopPropagation(),n.trigger("changing",[n.val(),i])}).on("change",function(t,e,i){t.stopPropagation(),n.trigger("change",[n.val(),i])}),i},prevRange:function(t){var e=t.index();if(e>=0)return this.ranges[e-1]},nextRange:function(t){var e=t.index();if(e>=0)return this.ranges[t instanceof a?e:e+1]},setVal:function(t){if(this.ranges.length>t.length){for(var e=t.length-1,i=this.ranges.length-1;e<i;--i)this.removeRange(i);this.ranges.length=t.length}var n=this;return t.forEach(function(t,e){n.ranges[e]?n.ranges[e].val(t.map(h.proxy(n.abnormalise,n))):n.addRange(t.map(h.proxy(n.abnormalise,n)))}),this},val:function(t){var e=this;return void 0===t?this.ranges.map(function(t){return t.val().map(h.proxy(e.normalise,e))}):(this.readonly()||this.setVal(t),this)},removePhantom:function(){this.phantom&&(this.phantom.remove(),this.phantom=null)},removeRange:function(t,e,i){t instanceof s&&(t=this.ranges.indexOf(t)),this.ranges.splice(t,1)[0][i?"detach":"remove"](),e||this.trigger("change",[this.val()])},repositionRange:function(t,e){this.removeRange(t,!0,!0),this.insertRangeIndex(t,this.findGap(e))},calcGap:function(t){var e=this.ranges[t-1]?this.ranges[t-1].val()[1]:0,i=this.ranges[t]?this.ranges[t].val()[0]:1;return this.normaliseRaw(i)-this.normaliseRaw(e)},readonly:function(){return"function"==typeof this.options.readonly?this.options.readonly.call(this):this.options.readonly},mousemove:function(t){var e=this.options.minSize?this.abnormaliseRaw(this.options.minSize+this.options.min):.05,i=(o(this.ifVertical("pageY","pageX"),t)-this.startProp("offset"))/this.totalSize()-e/2,n=t.target===t.currentTarget,s=h(t.target).is(".elessar-phantom");if((n||s)&&this.ranges.length<this.options.maxRanges&&!h("body").is(".elessar-dragging, .elessar-resizing")&&!this.readonly()){this.phantom||(this.phantom=a({perant:this,snap:this.options.snap?this.abnormaliseRaw(this.options.snap+this.options.min):null,label:"+",minSize:this.options.minSize?this.abnormaliseRaw(this.options.minSize+this.options.min):null,rangeClass:this.options.rangeClass}));var r=this.findGap([i,i+e]),l=this;this.one("addrange",function(t,e,i){i.one("mouseup",function(){l.trigger("change",[l.val(),i])})}),(!this.options.minSize||this.calcGap(r)>=this.options.minSize)&&(this.insertRangeIndex(this.phantom,r,!0),this.phantom.val([i,i+e],{trigger:!1}))}}});u.defaults={min:0,max:100,valueFormat:function(t){return t},valueParse:function(t){return t},maxRanges:1/0,readonly:!1,bgLabels:0,deleteTimeout:5e3,allowDelete:!1,vertical:!1,htmlLabel:!1,allowSwap:!0},e.exports=u},{"./element":1,"./eventprop":2,"./indicator":3,"./mark.js":4,"./phantom":5,"./range":7,"./vertical":9}],9:[function(t,e,i){e.exports={isVertical:function(){return this.options.vertical},ifVertical:function(t,e){return this.isVertical()?t:e},edge:function(t){if("start"===t)return this.ifVertical("top","left");if("end"===t)return this.ifVertical("bottom","right");throw TypeError("What kind of an edge is "+t)},totalSize:function(){return this.$el[this.ifVertical("height","width")]()},edgeProp:function(t,e){return this.$el[e]()[this.edge(t)]},startProp:function(t){return this.edgeProp("start",t)},endProp:function(t){return this.edgeProp("end",t)}}},{}],10:[function(e,i,n){(function(){function e(t,e){var i={}.hasOwnProperty;for(var n in e)i.call(e,n)&&(t[n]=e[n]);return t}!function(e){switch(!1){case!("function"==typeof t&&null!=t.amd):return t([],e);case"object"!=typeof n:return i.exports=e();default:return this.Base=e()}}(function(){return function(){n.displayName="Base";var t,i=n.prototype;function n(){}return t=function(t,i,n,s,a){return t[i]="function"==typeof n?e(function(){var t=this;return n.superclass$=a,n.super$=function(){return s.apply(t,arguments)},n.apply(this,arguments)},n):n},n.extend=function(i,s){return null==s&&(s=i),function(a){var r,o,l,h=function t(e,i){function n(){}return n.prototype=(e.superclass=i).prototype,(e.prototype=new n).constructor=e,"function"==typeof i.extended&&i.extended(e),e}(e(p,a),a).prototype;function p(){var t=this instanceof u?this:new u;return t.initialize.apply(t,arguments),t}function u(){}for(r in e(p,n),"string"==typeof i&&(p.displayName=i),u.prototype=h,h.initialize=function(){return null!=a.prototype.initialize?a.prototype.initialize.apply(this,arguments):a.apply(this,arguments)},o=s)l=o[r],t(h,r,l,h[r],a);return p}(this)},n.meta=function(e){var i,n;for(i in e)n=e[i],t(this,i,n,this[i],this);return this},i.initialize=function(){},n}()})}).call(this)},{}]},{},[8])(8)});